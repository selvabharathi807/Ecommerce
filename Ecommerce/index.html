<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Selva Stores — Electronics</title>
  <meta name="description" content="Selva Stores — neat & elegant electronics store. Browse, add to cart, and checkout (demo)." />
  <style>
    :root{
      --bg:#f6f8fb;--card:#ffffff;--accent:#0ea5e9;--accent-dark:#0369a1;--text:#0f172a;--muted:#64748b;--border:#e6eef6
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
    header{background:linear-gradient(90deg,rgba(255,255,255,0.85),rgba(255,255,255,0.7));border-bottom:1px solid var(--border);position:sticky;top:0;z-index:60}
    .container{max-width:1200px;margin:0 auto;padding:18px}
    nav{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .brand{font-size:20px;font-weight:800;color:var(--accent);letter-spacing:0.4px}
    .nav-actions{display:flex;gap:12px;align-items:center}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .ghost{background:transparent;border:1px solid var(--border);padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer}

    .layout{display:grid;grid-template-columns:260px 1fr 360px;gap:18px;padding:20px}
    @media (max-width:1000px){.layout{grid-template-columns:1fr;}.cart-panel{order:3}}

    /* sidebar categories */
    .sidebar{background:var(--card);border-radius:12px;padding:14px;border:1px solid var(--border)}
    .categories button{display:block;width:100%;text-align:left;padding:10px;border-radius:8px;border:0;background:transparent;color:var(--text);cursor:pointer}
    .categories button.active{background:rgba(14,165,233,0.08);color:var(--accent-dark)}

    /* main */
    .toolbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
    .search{flex:1;display:flex;gap:8px}
    .search input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:transparent}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .product{background:var(--card);padding:12px;border-radius:12px;border:1px solid var(--border);cursor:pointer;display:flex;flex-direction:column;gap:8px}
    .product img{width:100%;height:160px;object-fit:cover;border-radius:10px}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:700;color:var(--accent-dark)}
    .chip{font-size:13px;color:var(--muted)}

    /* cart panel */
    .cart-panel{background:var(--card);border-radius:12px;padding:12px;border:1px solid var(--border);position:sticky;top:86px;height:fit-content}
    .cart-item{display:flex;gap:12px;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(0,0,0,0.04)}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:var(--muted)}

    footer{padding:24px;text-align:center;color:var(--muted)}

    /* modal & auth */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:90;padding:20px}
    .modal.open{display:flex}
    .modal-card{background:#fff;padding:18px;border-radius:12px;max-width:720px;width:100%;border:1px solid var(--border)}
    .form-row{display:flex;gap:8px}
    .input,textarea{padding:10px;border-radius:8px;border:1px solid var(--border);width:100%}
    .admin-link{font-size:13px;color:var(--muted);cursor:pointer;text-decoration:underline}

    /* empty state */
    .empty{padding:40px;border-radius:12px;text-align:center;color:var(--muted);background:linear-gradient(180deg,rgba(234,239,255,0.6),transparent)}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="brand">Selva Stores</div>
        <div class="nav-actions">
          <div style="display:flex;gap:10px;align-items:center">
            <button class="ghost" id="loginBtn">Login</button>
            <button class="ghost" id="adminBtn">Admin</button>
          </div>
          <button class="btn" id="viewCartBtn">Cart (<span id="cartCount">0</span>)</button>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <!-- left: categories -->
      <aside class="sidebar">
        <h4 style="margin:0 0 10px">Categories</h4>
        <div class="categories" id="categories"></div>
        <hr style="border:none;border-top:1px solid var(--border);margin:12px 0" />
        <div style="font-size:13px;color:var(--muted)">Filters</div>
        <div style="margin-top:8px">
          <select id="sortSel" class="input">
            <option value="default">Sort: Featured</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
          </select>
        </div>
      </aside>

      <!-- middle: products -->
      <section>
        <div class="toolbar">
          <div class="search">
            <input id="search" placeholder="Search products, e.g. headphone" />
          </div>
          <div style="margin-left:12px"><span class="small">Free shipping over $100</span></div>
        </div>

        <div id="grid" class="grid"></div>

        <div id="empty" class="empty" style="display:none;margin-top:18px">No products found.</div>
      </section>

      <!-- right: cart -->
      <aside class="cart-panel" aria-live="polite">
        <h4 style="margin:0 0 10px">Cart</h4>
        <div id="cartItems"></div>
        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="small">Total</div>
            <div style="font-weight:700;font-size:18px" id="cartTotal">$0</div>
          </div>
          <div>
            <button class="btn" id="checkoutBtn">Checkout</button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="container">
    © <span id="year"></span> Selva Stores — Electronics. Crafted with care.
  </footer>

  <!-- Product / Checkout Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-card" id="modalCard"></div>
  </div>

  <!-- simple admin panel modal -->
  <div id="adminModal" class="modal"><div class="modal-card" id="adminCard"></div></div>

  <script>
    // sample product data
    const PRODUCTS = [
      {id:1,name:'Wireless Headphones',price:89,category:'Audio',desc:'Noise-cancelling over-ear Bluetooth headphones with 30h battery.',img:'https://imgs.search.brave.com/1QM1-qDVOogAgwSzLSwU0ANX6S9xU9yQOZWa6pIdUio/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly90My5m/dGNkbi5uZXQvanBn/LzAzLzI2Lzc1LzU2/LzM2MF9GXzMyNjc1/NTY5N19XT0ZoNDJy/VUE2MXJvRjQ1VHJt/UThQSlF3eDVrWWdU/di5qcGc'},
      {id:2,name:'Gaming Laptop',price:1199,category:'Computers',desc:'High-performance laptop with RTX GPU and 144Hz display.',img:'https://images.unsplash.com/photo-1517336714731-489689fd1ca8'},
      {id:3,name:'Smartwatch',price:149,category:'Wearables',desc:'Track fitness, calls, notifications and more.',img:'https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b'},
      {id:4,name:'Bluetooth Speaker',price:59,category:'Audio',desc:'Portable speaker with deep bass and long battery life.',img:'https://images.unsplash.com/photo-1585386959984-a4155224a1ad'},
      {id:5,name:'USB-C Hub',price:39,category:'Accessories',desc:'6-in-1 USB-C hub with HDMI and Ethernet.',img:'https://imgs.search.brave.com/tKj9K5pJPiw1UPTFDbedmDSCuyQFFuNw5UO4mMHeuEE/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzE1LzU2LzUwLzA3/LzM2MF9GXzE1NTY1/MDA3NjdfWmpBMkZJ/S3g1QmNJQ1BRc0Va/d0pQNkExR1pZaFh1/WFcuanBn'},
      {id:6,name:'4K Monitor',price:399,category:'Computers',desc:'27-inch 4K IPS monitor with HDR.',img:'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}
    ];

    // app state
    let state = {
      products: PRODUCTS.slice(),
      filtered: PRODUCTS.slice(),
      categories: ['All',...new Set(PRODUCTS.map(p=>p.category))],
      cart: JSON.parse(localStorage.getItem('selva_cart')||'{}')
    };

    // util
    const $ = sel => document.querySelector(sel);
    const format = v => '$' + Number(v).toFixed(2);

    // render categories
    function renderCategories(){
      const el = $('#categories'); el.innerHTML='';
      state.categories.forEach(cat=>{
        const btn = document.createElement('button'); btn.textContent = cat; btn.dataset.cat = cat;
        if(cat==='All') btn.classList.add('active');
        btn.addEventListener('click', ()=>{
          document.querySelectorAll('#categories button').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          filterByCategory(cat);
        });
        el.appendChild(btn);
      });
    }

    function filterByCategory(cat){
      if(cat==='All'){ state.filtered = state.products.slice(); }
      else{ state.filtered = state.products.filter(p=>p.category===cat); }
      applySearchSort();
    }

    // render grid
    function renderGrid(){
      const grid = $('#grid'); grid.innerHTML='';
      if(state.filtered.length===0){ $('#empty').style.display = 'block'; } else { $('#empty').style.display='none'; }
      state.filtered.forEach(p=>{
        const card = document.createElement('div'); card.className='product';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}" />
          <div style="flex:1">
            <h3 style="margin:6px 0">${p.name}</h3>
            <div class="meta"><span class="price">${format(p.price)}</span><span class="chip">${p.category}</span></div>
            <p class="small" style="margin:8px 0 0">${p.desc}</p>
          </div>
          <div style="margin-top:10px;display:flex;gap:8px;justify-content:space-between;align-items:center">
            <button class="ghost" data-view="${p.id}">View</button>
            <button class="btn" data-buy="${p.id}">Add</button>
          </div>
        `;
        grid.appendChild(card);
      });

      // attach handlers
      document.querySelectorAll('[data-view]').forEach(b=>b.addEventListener('click', (e)=>{
        const id = Number(e.currentTarget.dataset.view); openProduct(id);
      }));
      document.querySelectorAll('[data-buy]').forEach(b=>b.addEventListener('click', (e)=>{
        const id = Number(e.currentTarget.dataset.buy); addToCart(id,1);
      }));
    }

    // search & sort
    function applySearchSort(){
      const q = $('#search').value.trim().toLowerCase();
      const s = $('#sortSel').value;
      let list = state.products.slice();
      // category filter already applied by filterByCategory (we keep state.filtered), but we reapply search and sort on filtered set
      list = state.filtered.slice();
      if(q) list = list.filter(p=> (p.name+ ' ' + p.desc).toLowerCase().includes(q));
      if(s==='price-asc') list.sort((a,b)=>a.price-b.price);
      if(s==='price-desc') list.sort((a,b)=>b.price-a.price);
      state.filtered = list;
      renderGrid();
    }

    // product modal
    function openProduct(id){
      const p = state.products.find(x=>x.id===id); if(!p) return;
      $('#modalCard').innerHTML = `
        <div style="display:flex;gap:14px;align-items:flex-start">
          <img src="${p.img}" alt="${p.name}" style="width:240px;height:180px;object-fit:cover;border-radius:10px" />
          <div style="flex:1">
            <h2 style="margin-top:0">${p.name}</h2>
            <p style="color:var(--muted)">${p.desc}</p>
            <p style="font-weight:700;margin-top:8px">${format(p.price)}</p>
            <div style="margin-top:12px;display:flex;gap:8px"><button class="btn" id="modalAdd">Add to cart</button><button class="ghost" id="modalClose">Close</button></div>
          </div>
        </div>
      `;
      openModal('modal');
      $('#modalCard #modalAdd').addEventListener('click', ()=>{ addToCart(id,1); closeModal('modal'); });
      $('#modalCard #modalClose').addEventListener('click', ()=>closeModal('modal'));
    }

    // cart functions
    function addToCart(id,qty=1){
      const key = String(id);
      state.cart[key] = (state.cart[key]||0) + qty;
      saveCart(); renderCart();
    }
    function removeFromCart(id){ delete state.cart[String(id)]; saveCart(); renderCart(); }
    function changeQty(id,delta){ const key=String(id); state.cart[key] = Math.max(0,(state.cart[key]||0)+delta); if(state.cart[key]===0) delete state.cart[key]; saveCart(); renderCart(); }
    function saveCart(){ localStorage.setItem('selva_cart', JSON.stringify(state.cart)); }

    function renderCart(){
      const el = $('#cartItems'); el.innerHTML='';
      const ids = Object.keys(state.cart).map(Number);
      if(ids.length===0){ el.innerHTML = '<div class="small">Your cart is empty.</div>'; $('#cartCount').textContent = '0'; $('#cartTotal').textContent = format(0); return; }
      let total=0; ids.forEach(id=>{
        const p = state.products.find(x=>x.id===id); const qty = state.cart[id]; total += p.price * qty;
        const row = document.createElement('div'); row.className='cart-item';
        row.innerHTML = `
          <img src="${p.img}" alt="${p.name}" />
          <div style="flex:1">
            <div style="font-weight:700">${p.name}</div>
            <div class="small">${format(p.price)} × ${qty} = ${format(p.price*qty)}</div>
          </div>
          <div class="qty">
            <button class="ghost" data-minus="${id}">−</button>
            <div style="min-width:28px;text-align:center">${qty}</div>
            <button class="ghost" data-plus="${id}">+</button>
          </div>
        `;
        el.appendChild(row);
      });
      $('#cartCount').textContent = ids.reduce((s,i)=>s+state.cart[i],0);
      $('#cartTotal').textContent = format(total);

      document.querySelectorAll('[data-plus]').forEach(b=>b.addEventListener('click', e=>changeQty(Number(e.currentTarget.dataset.plus),1)));
      document.querySelectorAll('[data-minus]').forEach(b=>b.addEventListener('click', e=>changeQty(Number(e.currentTarget.dataset.minus),-1)));
    }

    // checkout
    function openCheckout(){
      const ids = Object.keys(state.cart).map(Number); if(ids.length===0){ alert('Cart is empty.'); return; }
      $('#modalCard').innerHTML = `
        <h2>Checkout</h2>
        <form id="checkoutForm">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
            <input class="input" name="name" placeholder="Full name" required />
            <input class="input" name="email" placeholder="Email" type="email" required />
          </div>
          <div style="margin-top:8px"><input class="input" name="address" placeholder="Address" required /></div>
          <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
            <div class="small">Payment: Demo (no real charge)</div>
            <button class="btn" type="submit">Place order</button>
          </div>
        </form>
      `;
      openModal('modal');
      document.getElementById('checkoutForm').addEventListener('submit', (e)=>{
        e.preventDefault(); const form = new FormData(e.currentTarget); const name = form.get('name');
        // simple demo order
        const order = {id:Date.now(),name,items:state.cart,total:$('#cartTotal').textContent};
        // clear cart
        state.cart = {}; saveCart(); renderCart(); closeModal('modal'); alert('Thanks ' + name + '! Your order has been placed (demo).');
      });
    }

    // modal helpers
    function openModal(id){ document.getElementById(id).classList.add('open'); }
    function closeModal(id){ document.getElementById(id).classList.remove('open'); }

    // auth & admin (demo)
    function openLogin(){
      $('#modalCard').innerHTML = `
        <h2>Login (demo)</h2>
        <p class="small">This is a demo login — no real authentication.</p>
        <form id="loginForm">
          <input class="input" name="user" placeholder="username" required />
          <input class="input" name="pass" placeholder="password" type="password" required style="margin-top:8px" />
          <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" type="submit">Login</button><button class="ghost" id="loginClose">Close</button></div>
        </form>
      `; openModal('modal');
      document.getElementById('loginForm').addEventListener('submit', (e)=>{ e.preventDefault(); alert('Logged in (demo)'); closeModal('modal'); });
      document.getElementById('loginClose').addEventListener('click', ()=>closeModal('modal'));
    }

    function openAdmin(){
      // very simple password prompt
      const pwd = prompt('Enter admin password (demo):');
      if(pwd !== 'admin123'){ alert('Wrong password (demo). Use admin123 to view admin).'); return; }
      const list = state.products.map(p=>`<tr><td>${p.id}</td><td>${p.name}</td><td>${format(p.price)}</td><td>${p.category}</td><td><button class="ghost" data-edit="${p.id}">Edit</button></td></tr>`).join('');
      $('#adminCard').innerHTML = `
        <h2>Admin (demo)</h2>
        <p class="small">Manage products (demo only). Changes persist in-memory until page reload.</p>
        <div style="overflow:auto;max-height:60vh"><table style="width:100%;border-collapse:collapse"><thead><tr><th>ID</th><th>Name</th><th>Price</th><th>Category</th><th></th></tr></thead><tbody>${list}</tbody></table></div>
        <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="adminClose">Close</button></div>
      `; openModal('adminModal');
      document.getElementById('adminClose').addEventListener('click', ()=>closeModal('adminModal'));
      document.querySelectorAll('[data-edit]').forEach(b=>b.addEventListener('click', (e)=>{
        const id = Number(e.currentTarget.dataset.edit); const p = state.products.find(x=>x.id===id);
        const newName = prompt('Edit name', p.name); if(!newName) return; p.name = newName; renderGrid(); closeModal('adminModal'); alert('Updated (demo).');
      }));
    }

    // init
    function init(){
      renderCategories(); renderGrid(); renderCart();
      document.getElementById('search').addEventListener('input', ()=>applySearchSort());
      document.getElementById('sortSel').addEventListener('change', ()=>applySearchSort());
      document.getElementById('checkoutBtn').addEventListener('click', openCheckout);
      document.getElementById('viewCartBtn').addEventListener('click', ()=>window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'}));
      document.getElementById('loginBtn').addEventListener('click', openLogin);
      document.getElementById('adminBtn').addEventListener('click', openAdmin);
      document.getElementById('year').textContent = new Date().getFullYear();

      // close modal on background click
      document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target.id==='modal') closeModal('modal'); });
      document.getElementById('adminModal').addEventListener('click', (e)=>{ if(e.target.id==='adminModal') closeModal('adminModal'); });
    }

    init();
  </script>
</body>
</html>
